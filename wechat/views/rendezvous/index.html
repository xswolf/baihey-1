<ion-view>
    <link href="/wechat/web/css/rendezvous.css" rel="stylesheet">
    <link href="/wechat/web/css/plugin/bootstrap/css/font-awesome.min.css" rel="stylesheet">
    <ion-header-bar>
        <button class="button button-icon" ng-click="showScreenModal()">筛选</button>
        <title class="title">约会</title>
        <a class="button button-icon icon ion-ios-plus-outline energized" href="#/main/rendezvous_add?userId=1&tempUrl=1"></a>
    </ion-header-bar>
    <ion-content class="bhy com_w_100 rendezvous" style="background: #e1e2e1;">
        <div class="list card" ng-repeat = "vo in list">
            <div class="item item-avatar">
                <img src="{{vo.info.head_pic}}">
                <h2>
                    <span class="fl">{{vo.info.real_name | sex:vo.sex :vo.info.age}}</span>
                    <span class="fl cor5 fs12 ml5 lh20">{{vo.info.age | timeToAge}}岁 {{vo.info.is_marriage | marriage}}</span>
                    <span class="fr fs12 lh20 cor5">
                        {{vo.rendezvous_time * 1000 | date:'MM-dd HH:mm'}}
                    </span>
                </h2>
                <p>
                    <span class="identity sfz" ng-if="vo.auth.identity_check">身份证</span>
                    <span class="identity phone" ng-if="vo.phone">手机</span>
                    <span class="identity vip" ng-if="vo.info.level == 1">vip</span>
                    <span class="identity guest" ng-if="vo.info.level == 2">贵宾</span>
                    <span class="identity diamond" ng-if="vo.info.level == 3">钻石</span>
                </p>
            </div>

            <div class="item item-body">
                <p class="mt0">
                    <!-- 约会主题 1:娱乐 2:美食 3:旅游 4:运动/健身  其它不显示-->
                    <i class="icon fs30 vam" ng-if="vo.theme!=5" ng-class="{'1':'bhy-icon-ent cor29','2':'bhy-icon-food cor23','3':'bhy-icon-tour cor25','4':'bhy-icon-moves cor33'}[vo.theme]"></i>
                    <span class="cor33">##{{vo.title}}##</span>{{vo.content}}
                </p>
                <p class="cor39 mt0 mb0">约会地点：{{vo.destination}}</p>
                <p class="cor39 mt0 mb0">约会时间：{{vo.rendezvous_time}}</p>
                <p class="cor39 mt0 mb0">费用说明：{{vo.fee_des | feeDisplay}}</p>
                <p class="cor39 mt0">性别限制：{{vo.sex | sexDisplay}}</p>
                <p>
                <p>
                <span class="label mr5" ng-repeat="lab in vo.label">{{lab}}</span>
                </p>
                <p class="countdown">
                    距离结束还有 {{vo.timer}}
                </p>
            </div>

            <div class="item tabs tabs-secondary tabs-icon-left" ng-if="vo.id != userInfo.user_id">
                <a class="tab-item func" ui-sref="main.rendezvous_ask({rendezvous_id:vo.r_id,user_id:vo.id,head_pic:vo.info.head_pic,real_name:vo.info.real_name,sex:vo.sex,age:vo.info.age,is_marriage:vo.info.is_marriage,education:vo.info.education})">
                    <i class="ion-heart fs16"></i>
                    约TA
                </a>
                <a class="tab-item func" ui-sref="main.message_chat({id:vo.id,head_pic:vo.info.head_pic,real_name:vo.info.real_name,sex:vo.sex,age:vo.info.age})">
                    <i class="ion-chatbox fs16"></i>
                    对话
                </a>

            </div>
            <div class="item tabs tabs-secondary tabs-icon-left" ng-if="vo.id == userInfo.user_id">
                <p>您不能约自己</p>
            </div>
        </div>
        <ion-infinite-scroll ng-if="moreDataCanBeLoaded()" on-infinite="loadMoreData()" distance="1%">
        </ion-infinite-scroll>
    </ion-content>

    <script id="screenModal.html" type="text/ng-template">
        <ion-modal-view>
            <ion-header-bar>
                <button class="button button-icon" ng-click="closeScreenModal()">关闭</button>
                <h1 class="title">筛选</h1>
                <button class="button button-icon cor21" ng-click="saveScreen()">确定</button>
            </ion-header-bar>
            <ion-content>
                <ion-list>
                    <div class="item item-input item-select">
                        <div class="input-label">
                            约会主题
                        </div>
                        <select ng-model="screen.theme">
                            <option value="0" selected>不限</option>
                            <option value="1">娱乐</option>
                            <option value="2">美食</option>
                            <option value="3">旅游</option>
                            <option value="4">运动/健身</option>
                            <option value="5">其它</option>
                        </select>
                    </div>
                    <div class="item item-input item-select">
                        <div class="input-label">
                            费用
                        </div>
                        <select ng-model="screen.fee_des">
                            <option value="0" selected>不限</option>
                            <option value="1">免费</option>
                            <option value="2">我请客</option>
                            <option value="3">你请客</option>
                            <option value="4">AA制</option>
                        </select>
                    </div>
                    <div class="item">
                        <span class="input-label">发布者性别</span>
                        <div class="button-bar">
                            <a class="button bor_imp" ng-class="{0:'button-positive',1:'button-stable',2:'button-stable'}[screen.sex]" ng-click="sexChange(0)">不限</a>
                            <a class="button bor_imp" ng-class="{0:'button-stable',1:'button-positive',2:'button-stable'}[screen.sex]" ng-click="sexChange(1)">男</a>
                            <a class="button bor_imp" ng-class="{0:'button-stable',1:'button-stable',2:'button-positive'}[screen.sex]" ng-click="sexChange(2)">女</a>
                        </div>
                    </div>
                </ion-list>
            </ion-content>
            <ion-infinite-scroll
                    ng-if="moreDataCanBeLoaded()"
                    on-infinite="loadMore()"
                    distance="1%">
            </ion-infinite-scroll>
        </ion-modal-view>
    </script>
</ion-view>